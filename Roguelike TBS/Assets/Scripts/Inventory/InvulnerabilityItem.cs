using System.Collections;
using UnityEngine;

// TODO Rework using the iFrames already existing?
[CreateAssetMenu(menuName = ("Inventory/Invulnerability Item"))]
public class InvulnerabilityItem: ActionItem {
    [SerializeField] float invulnerabilityTimer = 10;
    [SerializeField] GameObject onUseParticleEffect = null;
    [SerializeField] AudioClip sfx = null;

    // PUBLIC

    /// <summary>
    /// Trigger the use of this item.
    /// </summary>
    /// <param name="user">The character that is using this action.</param>
    public override void Use(GameObject user) {
        user.GetComponent<Fighter>().StartIFrameTimer(invulnerabilityTimer);

        OnUseEffect(user);
    }

    private void OnUseEffect(GameObject user) {
        if (onUseParticleEffect == null) { return; }

        Instantiate(onUseParticleEffect, user.transform);
    }
}
